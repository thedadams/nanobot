import"../chunks/DsnmJJEf.js";import{p as He,d as Be,f as ye,an as tt,a2 as at,g as d,c as ze,ar as st,as as Ce,s as n,l as s,i as e,m as a,t as X,j as be,O as z,at as we,k as p,ao as Y,a8 as r,au as Dt,av as Mt}from"../chunks/TV9P7kG6.js";import{s as ot,r as nt,i as C,a as St,b as qt}from"../chunks/DJGld0fm.js";import{w as et,P as Yt,B as _t,L as ut,p as Ft}from"../chunks/CYeIl6nq.js";import{g as xt}from"../chunks/Ctz0fIT4.js";import{I as it,e as Pe,s as y,a as Oe,i as Se,r as Xe,b as We,c as jt,X as Re,d as Ye}from"../chunks/CnB9Cxot.js";import{h as Xt,d as Wt}from"../chunks/C8Keeo7I.js";function bt(b,t){He(t,!0);/**
 * @license @lucide/svelte v0.540.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2023 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2025.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 * ---
 *
 * The MIT License (MIT) (for portions derived from Feather)
 *
 * Copyright (c) 2013-2023 Cole Bemis
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */let o=nt(t,["$$slots","$$events","$$legacy"]);const l=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z"}],["path",{d:"m15 5 4 4"}]];it(b,ot({name:"pencil"},()=>o,{get iconNode(){return l},children:(h,W)=>{var P=Be(),se=ye(P);tt(se,()=>t.children??at),d(h,P)},$$slots:{default:!0}})),ze()}function ft(b,t){He(t,!0);/**
 * @license @lucide/svelte v0.540.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2023 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2025.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 * ---
 *
 * The MIT License (MIT) (for portions derived from Feather)
 *
 * Copyright (c) 2013-2023 Cole Bemis
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */let o=nt(t,["$$slots","$$events","$$legacy"]);const l=[["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6"}],["path",{d:"M3 6h18"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"}]];it(b,ot({name:"trash"},()=>o,{get iconNode(){return l},children:(h,W)=>{var P=Be(),se=ye(P);tt(se,()=>t.children??at),d(h,P)},$$slots:{default:!0}})),ze()}function pt(b,t){He(t,!0);/**
 * @license @lucide/svelte v0.540.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2023 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2025.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 * ---
 *
 * The MIT License (MIT) (for portions derived from Feather)
 *
 * Copyright (c) 2013-2023 Cole Bemis
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */let o=nt(t,["$$slots","$$events","$$legacy"]);const l=[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.106-3.105c.32-.322.863-.22.983.218a6 6 0 0 1-8.259 7.057l-7.91 7.91a1 1 0 0 1-2.999-3l7.91-7.91a6 6 0 0 1 7.057-8.259c.438.12.54.662.219.984z"}]];it(b,ot({name:"wrench"},()=>o,{get iconNode(){return l},children:(h,W)=>{var P=Be(),se=ye(P);tt(se,()=>t.children??at),d(h,P)},$$slots:{default:!0}})),ze()}var Bt=Ce('<text text-anchor="middle" class="fill-base-content text-sm font-medium" dominant-baseline="middle"> </text>'),Rt=Ce('<g><path stroke="#6b7280" stroke-width="2" fill="none" marker-end="url(#arrowhead)"></path><!></g>'),Ht=(b,t,o)=>t.onNodeClick(e(o)),zt=(b,t,o)=>{(b.key==="Enter"||b.key===" ")&&(b.preventDefault(),t.onNodeClick(e(o)))},Lt=Ce('<polygon></polygon><text text-anchor="middle" dominant-baseline="middle" class="pointer-events-none fill-white text-sm font-medium"> </text>',1),Ot=Ce('<rect width="150" height="60" rx="30" ry="30"></rect><text text-anchor="middle" dominant-baseline="middle" class="pointer-events-none fill-white text-sm font-medium"> </text>',1),Vt=Ce('<rect width="150" height="60" rx="4" ry="4"></rect><text text-anchor="middle" dominant-baseline="middle" class="pointer-events-none fill-white text-sm font-medium"> </text>',1),Gt=Ce('<circle r="12" fill="#10b981"></circle><text text-anchor="middle" dominant-baseline="middle" class="pointer-events-none fill-white text-xs font-bold">✓</text>',1),Kt=Ce('<circle cx="0" cy="0" r="8" fill="#f59e0b"></circle><text x="0" y="0" text-anchor="middle" dominant-baseline="middle" class="pointer-events-none fill-white text-[10px] font-bold">T</text>',1),Qt=Ce('<circle cx="18" cy="0" r="8" fill="#3b82f6"></circle><text x="18" y="0" text-anchor="middle" dominant-baseline="middle" class="pointer-events-none fill-white text-[10px] font-bold">A</text>',1),Ut=Ce('<circle cx="36" cy="0" r="8" fill="#8b5cf6"></circle><text x="36" y="0" text-anchor="middle" dominant-baseline="middle" class="pointer-events-none fill-white text-[10px] font-bold">K</text>',1),Jt=Ce("<g><!><!><!></g>"),Zt=Ce('<g role="button" class="cursor-pointer transition-opacity hover:opacity-80" tabindex="0"><!><!><!></g>'),$t=Ce('<svg><defs><marker id="arrowhead" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto"><polygon points="0 0, 10 3, 0 6" fill="#6b7280"></polygon></marker></defs><!><!></svg>');function ea(b,t){He(t,!0);const o=be(()=>()=>{const _=t.flowchart.nodes;if(_.length===0)return{minX:0,minY:0,width:800,height:600};const i=Math.min(..._.map(f=>f.position.x))-50,k=Math.min(..._.map(f=>f.position.y))-50,x=Math.max(..._.map(f=>f.position.x))+200,N=Math.max(..._.map(f=>f.position.y))+100;return{minX:i,minY:k,width:x-i,height:N-k}});function l(_){switch(_.type){case"start":case"end":return"rounded";case"decision":return"diamond";case"process":default:return"rectangle"}}function h(_){if(_.completed)return"#10b981";switch(_.type){case"start":return"#3b82f6";case"end":return"#8b5cf6";case"decision":return"#f59e0b";case"process":default:return"#6b7280"}}function W(_){const i=t.flowchart.nodes.find(f=>f.id===_.source),k=t.flowchart.nodes.find(f=>f.id===_.target);if(!i||!k)return"";const x=P(i,k),N=P(k,i);return`M ${x.x} ${x.y} L ${N.x} ${N.y}`}function P(_,i){const x=_.type==="decision"?80:60,N=_.position.x+150/2,f=_.position.y+x/2,m=i.position.x+75-N,B=i.position.y+30-f,F=Math.atan2(B,m)*(180/Math.PI);return F>=-45&&F<45?{x:_.position.x+150,y:f}:F>=45&&F<135?{x:N,y:_.position.y+x}:F>=135||F<-135?{x:_.position.x,y:f}:{x:N,y:_.position.y}}function se(_){if(!_.label)return null;const i=t.flowchart.nodes.find(f=>f.id===_.source),k=t.flowchart.nodes.find(f=>f.id===_.target);if(!i||!k)return null;const x=P(i,k),N=P(k,i);return{x:(x.x+N.x)/2,y:(x.y+N.y)/2}}var re=$t(),oe=n(s(re));Pe(oe,17,()=>t.flowchart.edges,_=>_.id,(_,i)=>{var k=Rt(),x=s(k),N=n(x);{var f=m=>{const B=be(()=>se(e(i)));var F=Be(),D=ye(F);{var Q=ne=>{var le=Bt(),Ne=s(le,!0);a(le),X(()=>{y(le,"x",e(B).x),y(le,"y",e(B).y),z(Ne,e(i).label)}),d(ne,le)};C(D,ne=>{e(B)&&ne(Q)})}d(m,F)};C(N,m=>{e(i).label&&m(f)})}a(k),X(m=>y(x,"d",m),[()=>W(e(i))]),d(_,k)});var me=n(oe);Pe(me,17,()=>t.flowchart.nodes,_=>_.id,(_,i)=>{const k=be(()=>l(e(i))),x=be(()=>h(e(i))),N=be(()=>t.selectedNodeId===e(i).id),f=be(()=>e(i).tools&&e(i).tools.length>0||e(i).agents&&e(i).agents.length>0||e(i).tasks&&e(i).tasks.length>0);var m=Zt();m.__click=[Ht,t,i],m.__keydown=[zt,t,i];var B=s(m);{var F=O=>{var U=Lt(),L=ye(U),V=n(L),fe=s(V,!0);a(V),X(()=>{y(L,"points",`${e(i).position.x+75},
${e(i).position.y??""}
${e(i).position.x+150},${e(i).position.y+40}
${e(i).position.x+75},${e(i).position.y+80}
${e(i).position.x??""},${e(i).position.y+40}`),y(L,"fill",e(x)),y(L,"stroke",e(N)?"#000":e(x)),y(L,"stroke-width",e(N)?"3":"1"),y(L,"opacity",e(i).completed?"0.7":"1"),y(V,"x",e(i).position.x+75),y(V,"y",e(i).position.y+40),z(fe,e(i).label)}),d(O,U)},D=O=>{var U=Be(),L=ye(U);{var V=ue=>{var ge=Ot(),q=ye(ge),I=n(q),de=s(I,!0);a(I),X(()=>{y(q,"x",e(i).position.x),y(q,"y",e(i).position.y),y(q,"fill",e(x)),y(q,"stroke",e(N)?"#000":e(x)),y(q,"stroke-width",e(N)?"3":"1"),y(q,"opacity",e(i).completed?"0.7":"1"),y(I,"x",e(i).position.x+75),y(I,"y",e(i).position.y+30),z(de,e(i).label)}),d(ue,ge)},fe=ue=>{var ge=Vt(),q=ye(ge),I=n(q),de=s(I,!0);a(I),X(()=>{y(q,"x",e(i).position.x),y(q,"y",e(i).position.y),y(q,"fill",e(x)),y(q,"stroke",e(N)?"#000":e(x)),y(q,"stroke-width",e(N)?"3":"1"),y(q,"opacity",e(i).completed?"0.7":"1"),y(I,"x",e(i).position.x+75),y(I,"y",e(i).position.y+30),z(de,e(i).label)}),d(ue,ge)};C(L,ue=>{e(k)==="rounded"?ue(V):ue(fe,!1)},!0)}d(O,U)};C(B,O=>{e(k)==="diamond"?O(F):O(D,!1)})}var Q=n(B);{var ne=O=>{var U=Gt(),L=ye(U),V=n(L);X(()=>{y(L,"cx",e(i).position.x+140),y(L,"cy",e(i).position.y+10),y(V,"x",e(i).position.x+140),y(V,"y",e(i).position.y+10)}),d(O,U)};C(Q,O=>{e(i).completed&&O(ne)})}var le=n(Q);{var Ne=O=>{var U=Jt(),L=s(U);{var V=I=>{var de=Kt();we(),d(I,de)};C(L,I=>{e(i).tools&&e(i).tools.length>0&&I(V)})}var fe=n(L);{var ue=I=>{var de=Qt();we(),d(I,de)};C(fe,I=>{e(i).agents&&e(i).agents.length>0&&I(ue)})}var ge=n(fe);{var q=I=>{var de=Ut();we(),d(I,de)};C(ge,I=>{e(i).tasks&&e(i).tasks.length>0&&I(q)})}a(U),X(()=>y(U,"transform",`translate(${e(i).position.x+5}, ${e(i).position.y+5})`)),d(O,U)};C(le,O=>{e(f)&&O(Ne)})}a(m),d(_,m)}),a(re),X((_,i,k,x,N,f)=>{y(re,"viewBox",`${_??""} ${i??""} ${k??""} ${x??""}`),y(re,"width",N),y(re,"height",f)},[()=>e(o)().minX,()=>e(o)().minY,()=>e(o)().width,()=>e(o)().height,()=>e(o)().width,()=>e(o)().height]),d(b,re),ze()}st(["click","keydown"]);async function ta(b,t,o,l,h){e(t).trim()&&(await o.addNodeAssignment(l.taskId,l.selectedNode.id,"agents",e(t).trim()),r(t,""),r(h,!1))}async function aa(b,t,o,l,h){e(t).trim()&&(await o.addNodeAssignment(l.taskId,l.selectedNode.id,"tasks",e(t).trim()),r(t,""),r(h,!1))}function sa(b,t,o,l,h,W){r(t,!0),r(o,null),r(l,""),r(h,""),r(W,!0)}async function oa(b,t,o,l,h,W,P,se){e(t).trim()&&(e(o)?await l.updateNodeInput(h.taskId,h.selectedNode.id,e(o),{name:e(t).trim(),description:e(W).trim(),required:e(P)}):await l.addNodeInput(h.taskId,h.selectedNode.id,e(t).trim(),e(W).trim(),e(P)),se())}function na(b,t,o,l,h){r(t,!0),r(o,!1),r(l,"simple"),h()}function ia(b,t,o,l,h,W,P,se,re,oe,me,_){if(!e(t))return;const i=e(t).edges.filter(x=>x.source===o.selectedNode.id);if(i.some(x=>x.label==="Yes"||x.label==="No")){r(l,"decision");const x=i.find(f=>f.label==="Yes"),N=i.find(f=>f.label==="No");r(h,x?.target||"",!0),r(W,N?.target||"",!0),r(P,!1),r(se,!1)}else r(l,"simple"),r(re,i[0]?.target||"",!0),r(oe,!1);r(me,!0),r(_,!0)}function ra(b,t,o,l){r(t,!1),r(o,!1),l()}async function la(b,t,o,l,h,W,P,se,re,oe,me,_,i,k,x,N,f,m,B,F){if(e(t))try{if(e(o)){const D=e(t).edges.filter(Q=>Q.source===l.selectedNode.id);for(const Q of D)await h.deleteEdge(l.taskId,Q.id)}if(e(W)==="simple"){let D=e(P);e(se)&&e(re).trim()&&(D=await h.createNode(l.taskId,e(oe),e(re).trim(),"# "+e(re).trim(),l.selectedNode.id)),D&&await h.addEdge(l.taskId,l.selectedNode.id,D)}else{let D=e(me),Q=e(_);e(i)&&e(k).trim()&&(D=await h.createNode(l.taskId,e(x),e(k).trim(),"# "+e(k).trim(),l.selectedNode.id)),e(N)&&e(f).trim()&&(Q=await h.createNode(l.taskId,e(m),e(f).trim(),"# "+e(f).trim(),l.selectedNode.id)),D&&await h.addEdge(l.taskId,l.selectedNode.id,D,"Yes"),Q&&await h.addEdge(l.taskId,l.selectedNode.id,Q,"No")}r(B,!1),r(o,!1),F()}catch(D){console.error("Failed to save edge:",D)}}var da=(b,t,o)=>t.toggleNodeCompletion(o.taskId,o.selectedNode.id),ca=p("<button> </button>"),va=p('<p class="mt-1 text-xs text-base-content/60"> </p>'),_a=(b,t,o)=>t(e(o)),ua=(b,t,o,l)=>t.deleteNodeInput(o.taskId,o.selectedNode.id,e(l).id),ba=p('<div class="bg-base-50 rounded border border-base-200 p-3"><div class="mb-1 flex items-start justify-between gap-2"><div class="flex-1"><div class="flex items-center gap-2"><span class="text-sm font-medium"> </span> <span> </span></div> <!></div> <div class="flex gap-1"><button class="btn btn-square btn-ghost btn-xs" aria-label="Edit input"><!></button> <button class="btn btn-square btn-ghost btn-xs hover:text-error" aria-label="Delete input"><!></button></div></div></div>'),fa=p('<div class="space-y-2"></div>'),pa=p('<p class="text-sm text-base-content/60">No inputs defined</p>'),xa=p('<button class="btn mt-3 btn-block gap-1 btn-outline btn-sm"><!> Add Input</button>'),ma=p('<div class="bg-base-50 mt-3 space-y-3 rounded-lg border border-base-200 p-3"><div><label class="label"><span class="label-text text-xs">Name</span></label> <input type="text" placeholder="e.g., Project Name" class="input-bordered input input-sm w-full"/></div> <div><label class="label"><span class="label-text text-xs">Description</span></label> <textarea placeholder="Describe what this input is for..." class="textarea-bordered textarea w-full textarea-sm" rows="2"></textarea></div> <div class="flex items-center gap-2"><input type="checkbox" class="checkbox checkbox-sm" id="input-required"/> <label for="input-required" class="label-text cursor-pointer text-xs">Required</label></div> <div class="flex gap-2"><button class="btn flex-1 btn-ghost btn-sm">Cancel</button> <button class="btn flex-1 btn-sm btn-primary"> </button></div></div>'),ga=p('<div class="rounded-lg border border-base-300 bg-base-100 p-4"><h3 class="mb-3 text-sm font-semibold text-base-content/70">Inputs</h3> <!> <!></div>'),ha=(b,t,o,l)=>t.removeNodeAssignment(o.taskId,o.selectedNode.id,"tools",e(l)),ka=p('<span class="badge gap-1 badge-sm badge-warning"> <button class="hover:text-error" aria-label="Remove tool"><!></button></span>'),wa=p('<div><div class="mb-1 flex items-center gap-2 text-xs font-medium text-base-content/60"><!> <span>Tools</span></div> <div class="flex flex-wrap gap-1"></div></div>'),ya=(b,t,o,l)=>t.removeNodeAssignment(o.taskId,o.selectedNode.id,"agents",e(l)),Na=p('<span class="badge gap-1 badge-sm badge-info"> <button class="hover:text-error" aria-label="Remove agent"><!></button></span>'),Ia=p('<div><div class="mb-1 flex items-center gap-2 text-xs font-medium text-base-content/60"><!> <span>Agents</span></div> <div class="flex flex-wrap gap-1"></div></div>'),Ta=(b,t,o,l)=>t.removeNodeAssignment(o.taskId,o.selectedNode.id,"tasks",e(l)),Ea=p('<span class="badge gap-1 badge-sm badge-secondary"> <button class="hover:text-error" aria-label="Remove task"><!></button></span>'),Aa=p('<div><div class="mb-1 flex items-center gap-2 text-xs font-medium text-base-content/60"><!> <span>Tasks</span></div> <div class="flex flex-wrap gap-1"></div></div>'),Pa=(b,t)=>r(t,!0),Ca=p('<button class="btn gap-1 btn-outline btn-xs btn-warning"><!> Add Tool</button>'),Da=(b,t,o,l)=>{b.key==="Enter"&&t(),b.key==="Escape"&&(r(o,!1),r(l,""))},Ma=(b,t,o)=>{r(t,!1),r(o,"")},Sa=p('<div class="flex w-full gap-2"><input type="text" placeholder="Tool name..." class="input-bordered input input-xs flex-1"/> <button class="btn btn-xs btn-warning">Add</button> <button class="btn btn-ghost btn-xs"><!></button></div>'),qa=(b,t)=>r(t,!0),Ya=p('<button class="btn gap-1 btn-outline btn-xs btn-info"><!> Add Agent</button>'),Fa=p("<option> </option>"),ja=(b,t,o)=>{r(t,!1),r(o,"")},Xa=p('<div class="flex w-full gap-2"><select class="select-bordered select flex-1 select-xs"><option>Select agent...</option><!></select> <button class="btn btn-ghost btn-xs"><!></button></div>'),Wa=(b,t)=>r(t,!0),Ba=p('<button class="btn gap-1 btn-outline btn-xs btn-secondary"><!> Add Task</button>'),Ra=p("<option> </option>"),Ha=(b,t,o)=>{r(t,!1),r(o,"")},za=p('<div class="flex w-full gap-2"><select class="select-bordered select flex-1 select-xs"><option>Select task...</option><!></select> <button class="btn btn-ghost btn-xs"><!></button></div>'),La=p('<div class="rounded-lg border border-base-300 bg-base-100 p-4"><h3 class="mb-3 text-sm font-semibold text-base-content/70">Using...</h3> <!> <!> <!> <div class="flex flex-wrap gap-2 border-t border-base-300 pt-3"><!> <!> <!></div></div>'),Oa=(b,t,o)=>t.onNavigateToNode(e(o)),Va=p('<button class="btn btn-block justify-start btn-sm"><span class="font-normal text-base-content/60"> </span> <span class="font-medium"> </span></button>'),Ga=async(b,t,o,l)=>{if(!e(t))return;const h=e(t).edges.filter(W=>W.source===o.selectedNode.id);for(const W of h)await l.deleteEdge(o.taskId,W.id)},Ka=p('<div class="space-y-2"></div> <div class="mt-3 flex gap-2"><button class="btn flex-1 btn-outline btn-sm"><!> Edit</button> <button class="btn flex-1 btn-outline btn-sm btn-error"><!> Delete</button></div>',1),Qa=p('<p class="mb-3 text-sm text-base-content/60">No next steps defined</p> <button class="btn btn-block gap-1 btn-outline btn-sm"><span>+</span> Add Next Step</button>',1),Ua=(b,t)=>r(t,"simple"),Ja=(b,t)=>r(t,"decision"),Za=(b,t,o)=>r(t,e(o)==="new"),$a=p("<option> </option>"),es=p('<div class="space-y-2 rounded border border-base-300 bg-base-100 p-2"><input type="text" placeholder="New node label..." class="input-bordered input input-sm w-full"/> <select class="select-bordered select w-full select-sm"><option>Process</option><option>Decision</option><option>End</option></select></div>'),ts=p('<div class="space-y-2"><label class="label"><span class="label-text">Next node:</span></label> <select class="select-bordered select w-full select-sm"><option>Select a node...</option><!><option>+ Create New Node</option></select> <!></div>'),as=(b,t,o)=>r(t,e(o)==="new"),ss=p("<option> </option>"),os=p('<div class="space-y-1"><input type="text" placeholder="New node label..." class="input-bordered input input-xs w-full"/> <select class="select-bordered select w-full select-xs"><option>Process</option><option>Decision</option><option>End</option></select></div>'),ns=(b,t,o)=>r(t,e(o)==="new"),is=p("<option> </option>"),rs=p('<div class="space-y-1"><input type="text" placeholder="New node label..." class="input-bordered input input-xs w-full"/> <select class="select-bordered select w-full select-xs"><option>Process</option><option>Decision</option><option>End</option></select></div>'),ls=p('<div class="space-y-3"><div><label class="label"><span class="label-text text-xs font-medium">Condition/Question:</span></label> <input type="text" placeholder="e.g., Design approved?" class="input-bordered input input-sm w-full"/></div> <div class="space-y-2 rounded border border-success/30 bg-success/5 p-2"><label class="label py-0"><span class="label-text text-xs font-medium text-success">Yes/True →</span></label> <select class="select-bordered select w-full select-sm"><option>Select a node...</option><!><option>+ Create New Node</option></select> <!></div> <div class="space-y-2 rounded border border-error/30 bg-error/5 p-2"><label class="label py-0"><span class="label-text text-xs font-medium text-error">No/False →</span></label> <select class="select-bordered select w-full select-sm"><option>Select a node...</option><!><option>+ Create New Node</option></select> <!></div></div>'),ds=p('<div class="bg-base-50 mt-4 space-y-3 rounded-lg border border-base-200 p-3"><div class="flex gap-2"><button>Simple Next</button> <button>Decision</button></div> <!> <div class="flex gap-2"><button class="btn flex-1 btn-ghost btn-sm">Cancel</button> <button class="btn flex-1 btn-sm btn-primary"> </button></div></div>'),cs=p('<div class="space-y-4"><div class="flex items-start justify-between"><div><h2 class="text-lg font-semibold"> </h2> <span> </span></div> <!></div> <!> <div class="rounded-lg border border-base-300 bg-base-100 p-4"><h3 class="mb-3 text-sm font-semibold text-base-content/70">Do the following...</h3> <div class="prose prose-sm max-w-none"><!></div></div> <div class="rounded-lg border border-base-300 bg-base-100 p-4"><h3 class="mb-3 text-sm font-semibold text-base-content/70">Then...</h3> <!> <!></div></div>');function vs(b,t){He(t,!0);const o=et.getItemStore(t.workspaceId),l=be(()=>o.getTaskFlowchart(t.taskId)),h=be(()=>o.getItems("agent")),W=be(()=>o.getItems("task")),P=be(()=>e(l)?.nodes.filter(g=>g.type!=="start"&&g.id!==t.selectedNode.id)??[]);function se(g){return o.items.find(G=>G.id===g&&G.type==="agent")?.title||g}function re(g){return o.items.find(G=>G.id===g&&G.type==="task")?.title||g}let oe=Y(""),me=Y(""),_=Y(""),i=Y(!1),k=Y(!1),x=Y(!1),N=Y(!1),f=Y(null),m=Y(""),B=Y(""),F=Y(!0),D=Y(!1),Q=Y(!1),ne=Y("simple"),le=Y(""),Ne=Y(!1),O=Y(""),U=Y("process"),L=Y(""),V=Y(""),fe=Y(!1),ue=Y(""),ge=Y("process"),q=Y(""),I=Y(!1),de=Y(""),Ie=Y("process");async function Ve(){e(oe).trim()&&(await o.addNodeAssignment(t.taskId,t.selectedNode.id,"tools",e(oe).trim()),r(oe,""),r(i,!1))}function mt(g){r(N,!0),r(f,g.id,!0),r(m,g.name,!0),r(B,g.description,!0),r(F,g.required,!0)}function rt(){r(N,!1),r(f,null),r(m,""),r(B,""),r(F,!0)}function Ge(){r(le,""),r(Ne,!1),r(O,""),r(U,"process"),r(L,""),r(V,""),r(fe,!1),r(ue,""),r(ge,"process"),r(q,""),r(I,!1),r(de,""),r(Ie,"process")}function gt(g){return Wt(g)}var Ke=cs(),Qe=s(Ke),Ue=s(Qe),Je=s(Ue),ht=s(Je,!0);a(Je);var Ze=n(Je,2),kt=s(Ze,!0);a(Ze),a(Ue);var wt=n(Ue,2);{var yt=g=>{var j=ca();j.__click=[da,o,t];var G=s(j,!0);a(j),X(()=>{Oe(j,1,`btn btn-sm ${t.selectedNode.completed?"btn-success":"btn-outline"}`),z(G,t.selectedNode.completed?"✓ Done":"Mark Done")}),d(g,j)};C(wt,g=>{t.selectedNode.type!=="start"&&t.selectedNode.type!=="end"&&g(yt)})}a(Qe);var lt=n(Qe,2);{var Nt=g=>{var j=ga(),G=n(s(j),2);{var Te=J=>{var R=fa();Pe(R,21,()=>t.selectedNode.inputs,Se,(ce,ie)=>{var K=ba(),ve=s(K),Z=s(ve),$=s(Z),ee=s($),te=s(ee,!0);a(ee);var u=n(ee,2),v=s(u,!0);a(u),a($);var c=n($,2);{var M=w=>{var pe=va(),Ee=s(pe,!0);a(pe),X(()=>z(Ee,e(ie).description)),d(w,pe)};C(c,w=>{e(ie).description&&w(M)})}a(Z);var T=n(Z,2),S=s(T);S.__click=[_a,mt,ie];var E=s(S);bt(E,{class:"h-3 w-3"}),a(S);var A=n(S,2);A.__click=[ua,o,t,ie];var H=s(A);ft(H,{class:"h-3 w-3"}),a(A),a(T),a(ve),a(K),X(()=>{z(te,e(ie).name),Oe(u,1,`badge badge-xs ${e(ie).required?"badge-error":"badge-ghost"}`),z(v,e(ie).required?"Required":"Optional")}),d(ce,K)}),a(R),d(J,R)},he=J=>{var R=pa();d(J,R)};C(G,J=>{t.selectedNode.inputs&&t.selectedNode.inputs.length>0?J(Te):J(he,!1)})}var ke=n(G,2);{var Me=J=>{var R=xa();R.__click=[sa,N,f,m,B,F];var ce=s(R);Yt(ce,{class:"h-3 w-3"}),we(),a(R),d(J,R)},qe=J=>{var R=ma(),ce=s(R),ie=n(s(ce),2);Xe(ie),a(ce);var K=n(ce,2),ve=n(s(K),2);Dt(ve),a(K);var Z=n(K,2),$=s(Z);Xe($),we(2),a(Z);var ee=n(Z,2),te=s(ee);te.__click=rt;var u=n(te,2);u.__click=[oa,m,f,o,t,B,F,rt];var v=s(u,!0);a(u),a(ee),a(R),X(c=>{u.disabled=c,z(v,e(f)?"Save Changes":"Add Input")},[()=>!e(m).trim()]),We(ie,()=>e(m),c=>r(m,c)),We(ve,()=>e(B),c=>r(B,c)),jt($,()=>e(F),c=>r(F,c)),d(J,R)};C(ke,J=>{e(N)?J(qe,!1):J(Me)})}a(j),d(g,j)},It=g=>{var j=La(),G=n(s(j),2);{var Te=u=>{var v=wa(),c=s(v),M=s(c);pt(M,{class:"h-3.5 w-3.5"}),we(2),a(c);var T=n(c,2);Pe(T,21,()=>t.selectedNode.tools,Se,(S,E)=>{var A=ka(),H=s(A),w=n(H);w.__click=[ha,o,t,E];var pe=s(w);Re(pe,{class:"h-3 w-3"}),a(w),a(A),X(()=>z(H,`${e(E)??""} `)),d(S,A)}),a(T),a(v),d(u,v)};C(G,u=>{t.selectedNode.tools&&t.selectedNode.tools.length>0&&u(Te)})}var he=n(G,2);{var ke=u=>{var v=Ia(),c=s(v),M=s(c);_t(M,{class:"h-3.5 w-3.5"}),we(2),a(c);var T=n(c,2);Pe(T,21,()=>t.selectedNode.agents,Se,(S,E)=>{var A=Na(),H=s(A),w=n(H);w.__click=[ya,o,t,E];var pe=s(w);Re(pe,{class:"h-3 w-3"}),a(w),a(A),X(Ee=>z(H,`${Ee??""} `),[()=>se(e(E))]),d(S,A)}),a(T),a(v),d(u,v)};C(he,u=>{t.selectedNode.agents&&t.selectedNode.agents.length>0&&u(ke)})}var Me=n(he,2);{var qe=u=>{var v=Aa(),c=s(v),M=s(c);ut(M,{class:"h-3.5 w-3.5"}),we(2),a(c);var T=n(c,2);Pe(T,21,()=>t.selectedNode.tasks,Se,(S,E)=>{var A=Ea(),H=s(A),w=n(H);w.__click=[Ta,o,t,E];var pe=s(w);Re(pe,{class:"h-3 w-3"}),a(w),a(A),X(Ee=>z(H,`${Ee??""} `),[()=>re(e(E))]),d(S,A)}),a(T),a(v),d(u,v)};C(Me,u=>{t.selectedNode.tasks&&t.selectedNode.tasks.length>0&&u(qe)})}var J=n(Me,2),R=s(J);{var ce=u=>{var v=Ca();v.__click=[Pa,i];var c=s(v);pt(c,{class:"h-3 w-3"}),we(),a(v),d(u,v)},ie=u=>{var v=Sa(),c=s(v);Xe(c),c.__keydown=[Da,Ve,i,oe],Mt(c,!0);var M=n(c,2);M.__click=Ve;var T=n(M,2);T.__click=[Ma,i,oe];var S=s(T);Re(S,{class:"h-3 w-3"}),a(T),a(v),X(E=>M.disabled=E,[()=>!e(oe).trim()]),We(c,()=>e(oe),E=>r(oe,E)),d(u,v)};C(R,u=>{e(i)?u(ie,!1):u(ce)})}var K=n(R,2);{var ve=u=>{var v=Ya();v.__click=[qa,k];var c=s(v);_t(c,{class:"h-3 w-3"}),we(),a(v),d(u,v)},Z=u=>{var v=Xa(),c=s(v);c.__change=[ta,me,o,t,k];var M=s(c);M.value=M.__value="";var T=n(M);Pe(T,17,()=>e(h),Se,(A,H)=>{var w=Fa(),pe=s(w,!0);a(w);var Ee={};X(()=>{z(pe,e(H).title),Ee!==(Ee=e(H).id)&&(w.value=(w.__value=e(H).id)??"")}),d(A,w)}),a(c);var S=n(c,2);S.__click=[ja,k,me];var E=s(S);Re(E,{class:"h-3 w-3"}),a(S),a(v),Ye(c,()=>e(me),A=>r(me,A)),d(u,v)};C(K,u=>{e(k)?u(Z,!1):u(ve)})}var $=n(K,2);{var ee=u=>{var v=Ba();v.__click=[Wa,x];var c=s(v);ut(c,{class:"h-3 w-3"}),we(),a(v),d(u,v)},te=u=>{var v=za(),c=s(v);c.__change=[aa,_,o,t,x];var M=s(c);M.value=M.__value="";var T=n(M);Pe(T,17,()=>e(W),Se,(A,H)=>{var w=Ra(),pe=s(w,!0);a(w);var Ee={};X(()=>{z(pe,e(H).title),Ee!==(Ee=e(H).id)&&(w.value=(w.__value=e(H).id)??"")}),d(A,w)}),a(c);var S=n(c,2);S.__click=[Ha,x,_];var E=s(S);Re(E,{class:"h-3 w-3"}),a(S),a(v),Ye(c,()=>e(_),A=>r(_,A)),d(u,v)};C($,u=>{e(x)?u(te,!1):u(ee)})}a(J),a(j),d(g,j)};C(lt,g=>{t.selectedNode.type==="start"?g(Nt):g(It,!1)})}var $e=n(lt,2),dt=n(s($e),2),Tt=s(dt);Xt(Tt,()=>gt(t.selectedNode.content)),a(dt),a($e);var ct=n($e,2),vt=n(s(ct),2);{var Et=g=>{const j=be(()=>e(l).edges.filter(R=>R.source===t.selectedNode.id));var G=Ka(),Te=ye(G);Pe(Te,21,()=>e(j),Se,(R,ce)=>{const ie=be(()=>e(l).nodes.find($=>$.id===e(ce).target));var K=Be(),ve=ye(K);{var Z=$=>{var ee=Va();ee.__click=[Oa,t,ie];var te=s(ee),u=s(te);a(te);var v=n(te,2),c=s(v,!0);a(v),a(ee),X(()=>{z(u,`${e(ce).label||"Go to"}:`),z(c,e(ie).label)}),d($,ee)};C(ve,$=>{e(ie)&&$(Z)})}d(R,K)}),a(Te);var he=n(Te,2),ke=s(he);ke.__click=[ia,l,t,ne,V,q,fe,I,le,Ne,D,Q];var Me=s(ke);bt(Me,{class:"h-3 w-3"}),we(),a(ke);var qe=n(ke,2);qe.__click=[Ga,l,t,o];var J=s(qe);ft(J,{class:"h-3 w-3"}),we(),a(qe),a(he),d(g,G)},At=g=>{var j=Be(),G=ye(j);{var Te=he=>{var ke=Qa(),Me=n(ye(ke),2);Me.__click=[na,D,Q,ne,Ge],d(he,ke)};C(G,he=>{e(D)||he(Te)},!0)}d(g,j)};C(vt,g=>{!e(D)&&e(l)&&e(l).edges.filter(j=>j.source===t.selectedNode.id).length>0?g(Et):g(At,!1)})}var Pt=n(vt,2);{var Ct=g=>{var j=ds(),G=s(j),Te=s(G);Te.__click=[Ua,ne];var he=n(Te,2);he.__click=[Ja,ne],a(G);var ke=n(G,2);{var Me=K=>{var ve=ts(),Z=n(s(ve),2);Z.__change=[Za,Ne,le];var $=s(Z);$.value=$.__value="";var ee=n($);Pe(ee,17,()=>e(P),Se,(c,M)=>{var T=$a(),S=s(T,!0);a(T);var E={};X(()=>{z(S,e(M).label),E!==(E=e(M).id)&&(T.value=(T.__value=e(M).id)??"")}),d(c,T)});var te=n(ee);te.value=te.__value="new",a(Z);var u=n(Z,2);{var v=c=>{var M=es(),T=s(M);Xe(T);var S=n(T,2),E=s(S);E.value=E.__value="process";var A=n(E);A.value=A.__value="decision";var H=n(A);H.value=H.__value="end",a(S),a(M),We(T,()=>e(O),w=>r(O,w)),Ye(S,()=>e(U),w=>r(U,w)),d(c,M)};C(u,c=>{e(Ne)&&c(v)})}a(ve),Ye(Z,()=>e(le),c=>r(le,c)),d(K,ve)},qe=K=>{var ve=ls(),Z=s(ve),$=n(s(Z),2);Xe($),a(Z);var ee=n(Z,2),te=n(s(ee),2);te.__change=[as,fe,V];var u=s(te);u.value=u.__value="";var v=n(u);Pe(v,17,()=>e(P),Se,(_e,xe)=>{var ae=ss(),De=s(ae,!0);a(ae);var Ae={};X(()=>{z(De,e(xe).label),Ae!==(Ae=e(xe).id)&&(ae.value=(ae.__value=e(xe).id)??"")}),d(_e,ae)});var c=n(v);c.value=c.__value="new",a(te);var M=n(te,2);{var T=_e=>{var xe=os(),ae=s(xe);Xe(ae);var De=n(ae,2),Ae=s(De);Ae.value=Ae.__value="process";var Fe=n(Ae);Fe.value=Fe.__value="decision";var Le=n(Fe);Le.value=Le.__value="end",a(De),a(xe),We(ae,()=>e(ue),je=>r(ue,je)),Ye(De,()=>e(ge),je=>r(ge,je)),d(_e,xe)};C(M,_e=>{e(fe)&&_e(T)})}a(ee);var S=n(ee,2),E=n(s(S),2);E.__change=[ns,I,q];var A=s(E);A.value=A.__value="";var H=n(A);Pe(H,17,()=>e(P),Se,(_e,xe)=>{var ae=is(),De=s(ae,!0);a(ae);var Ae={};X(()=>{z(De,e(xe).label),Ae!==(Ae=e(xe).id)&&(ae.value=(ae.__value=e(xe).id)??"")}),d(_e,ae)});var w=n(H);w.value=w.__value="new",a(E);var pe=n(E,2);{var Ee=_e=>{var xe=rs(),ae=s(xe);Xe(ae);var De=n(ae,2),Ae=s(De);Ae.value=Ae.__value="process";var Fe=n(Ae);Fe.value=Fe.__value="decision";var Le=n(Fe);Le.value=Le.__value="end",a(De),a(xe),We(ae,()=>e(de),je=>r(de,je)),Ye(De,()=>e(Ie),je=>r(Ie,je)),d(_e,xe)};C(pe,_e=>{e(I)&&_e(Ee)})}a(S),a(ve),We($,()=>e(L),_e=>r(L,_e)),Ye(te,()=>e(V),_e=>r(V,_e)),Ye(E,()=>e(q),_e=>r(q,_e)),d(K,ve)};C(ke,K=>{e(ne)==="simple"?K(Me):K(qe,!1)})}var J=n(ke,2),R=s(J);R.__click=[ra,D,Q,Ge];var ce=n(R,2);ce.__click=[la,l,Q,t,o,ne,le,Ne,O,U,V,q,fe,ue,ge,I,de,Ie,D,Ge];var ie=s(ce,!0);a(ce),a(J),a(j),X(K=>{Oe(Te,1,`btn flex-1 btn-sm ${e(ne)==="simple"?"btn-primary":"btn-outline"}`),Oe(he,1,`btn flex-1 btn-sm ${e(ne)==="decision"?"btn-primary":"btn-outline"}`),ce.disabled=K,z(ie,e(Q)?"Save Changes":"Save")},[()=>e(ne)==="simple"?!e(le)||e(Ne)&&!e(O).trim():!e(V)&&!e(q)||e(fe)&&!e(ue).trim()||e(I)&&!e(de).trim()]),d(g,j)};C(Pt,g=>{e(D)&&g(Ct)})}a(ct),a(Ke),X(()=>{z(ht,t.selectedNode.label),Oe(Ze,1,`badge badge-sm ${t.selectedNode.completed?"badge-success":"badge-ghost"}`),z(kt,t.selectedNode.type)}),d(b,Ke),ze()}st(["click","keydown","change"]);var _s=()=>xt("/"),us=p('<div class="flex h-full items-center justify-center text-center"><div class="text-base-content/60"><p class="mb-2 text-lg font-medium">Select a Node</p> <p class="text-sm">Click on any node in the flowchart to view its details</p></div></div>'),bs=p('<div class="flex-shrink-0 bg-base-200 p-4"><div class="mb-2 text-xs text-base-content/60"><button class="hover:text-base-content">Workspaces</button> <span class="mx-1">/</span> <span> </span> <span class="mx-1">/</span> <span>Tasks</span></div> <h1 class="text-xl font-bold"> </h1></div> <div class="flex flex-1 overflow-hidden"><div class="flex flex-1 flex-col overflow-hidden border-r border-base-200 bg-base-200"><div class="flex-1 overflow-y-auto p-4"><!></div></div> <div class="flex-shrink-0 overflow-auto bg-base-100"><div class="mx-auto" style="width: fit-content;"><!></div></div></div>',1),fs=()=>xt("/"),ps=p(`<div class="flex h-full w-full items-center justify-center"><div class="text-center"><h2 class="mb-2 text-2xl font-bold">Task Not Found</h2> <p class="mb-4 text-base-content/60">The task you're looking for doesn't exist or has been deleted.</p> <button class="btn btn-primary">Back to Home</button></div></div>`),xs=p('<div class="flex h-full flex-col bg-base-100"><!></div>');function Is(b,t){He(t,!0);const o=()=>St(Ft,"$page",l),[l,h]=qt(),W=o().params.workspaceId??"",P=o().params.taskId??"",se=et.getItemStore(W),re=be(()=>se.items.find(m=>m.id===P&&m.type==="task")),oe=be(()=>et.workspaces.find(m=>m.id===W)),me=be(()=>P?se.getTaskFlowchart(P):void 0);let _=Y(null);function i(m){r(_,m,!0)}var k=xs(),x=s(k);{var N=m=>{var B=bs(),F=ye(B),D=s(F),Q=s(D);Q.__click=[_s];var ne=n(Q,4),le=s(ne,!0);a(ne),we(4),a(D);var Ne=n(D,2),O=s(Ne,!0);a(Ne),a(F);var U=n(F,2),L=s(U),V=s(L),fe=s(V);{var ue=Ie=>{vs(Ie,{get selectedNode(){return e(_)},get taskId(){return P},get workspaceId(){return W},onNavigateToNode:i})},ge=Ie=>{var Ve=us();d(Ie,Ve)};C(fe,Ie=>{e(_)&&e(me)&&P&&W?Ie(ue):Ie(ge,!1)})}a(V),a(L);var q=n(L,2),I=s(q),de=s(I);{let Ie=be(()=>e(_)?.id);ea(de,{get flowchart(){return e(me)},get selectedNodeId(){return e(Ie)},onNodeClick:i})}a(I),a(q),a(U),X(()=>{z(le,e(oe).name),z(O,e(re).title)}),d(m,B)},f=m=>{var B=ps(),F=s(B),D=n(s(F),4);D.__click=[fs],a(F),a(B),d(m,B)};C(x,m=>{e(re)&&e(oe)&&e(me)?m(N):m(f,!1)})}a(k),d(b,k),ze(),h()}st(["click"]);export{Is as component};
